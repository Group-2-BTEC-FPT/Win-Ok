@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Topics";
    Layout = "~/Views/Shared/_Layout_admin.cshtml";
    ViewData["head-title"] = "Topic Control";
}
@section Scripts{
    <script>
        let html = "";
        $.ajax({
            url: "https://localhost:5001/api/Topics",
            type: "GET",
            success: datas => {
                for (var data of datas.items) {
                    const updateTime = data.updateTime == null ? "No Time Update" : moment(data.updateTime).format("DD/MM/YYY")
                    html += `<tr>
                                     <th scope="row">`+ data.name + `</th>
                                     <td>`+ data.description + `</td>
                                     <td>`+ moment(data.createTime).format("DD/MM/YYY") + `</td>
                                     <td>`+ updateTime + `</td>
                                     <td><img class='image-topic' src=https://localhost:5001/store-image/`+ data.image + ` /></td>
                                     <td class='action-center' scope="col">
                                          <a class="btn btn-success">Update</a>
                                           <a class="btn btn-danger">Delete</a>
                                      </td>
                                     </tr>`;
                }
                $("#body-topic").html(html);
                $("#tabletopic").show();
                $("#spinLoaded").hide();
            }
        })
    </script>
}
<h2>Create</h2>
<div class="justify-content-center" style="display:flex" id="spinLoaded">
    <div class="spinner-border text-success " role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>
<table id="tabletopic" style="display:none" class="table table-striped table-hover">
    <thead style=" background: rebeccapurple;" >
        <tr>
            <th scope="col">Topic Name</th>
            <th scope="col">Topic Description</th>
            <th scope="col">Create Time</th>
            <th scope="col">Update Time</th>
            <th scope="col">Topic Image</th>
            <th scope="col" class="text-center">Action</th>
        </tr>
    </thead>
    <tbody id="body-topic">
    </tbody>
</table>